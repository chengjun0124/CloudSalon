app.controller("purchasedservice",["$scope","$stateParams","purchasedServiceAPIService",function(n,t,i){n.purchasedServiceId=t.purchasedServiceId;n.userId=t.userId;n.title="已购服务详情";n.routeName="user/"+n.userId;n.purchasedService=null;i.getPurchasedService(n.purchasedServiceId).then(function(t){n.purchasedService=t.data});n.getRemainTime=function(){for(var i=n.purchasedService.time,t=0;t<n.purchasedService.consumedServices.length;t++)i-=n.purchasedService.consumedServices[t].time;return i};n.getSuggestedDate=function(){if(n.purchasedService==null)return"";if(n.purchasedService.consumedServices.length==0||!n.purchasedService.interval)return"随时";var t=new Date(n.purchasedService.consumedServices[0].createdDate);return new Date(t.setDate(t.getDate()+n.purchasedService.interval+1)).format("YYYY-MM-dd")}}]);