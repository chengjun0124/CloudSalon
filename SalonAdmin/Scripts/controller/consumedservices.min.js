app.controller("consumedservices",["$scope","consumedServiceAPIService",function(n,t){function u(){t.getConsumedServiceCount(n.startDate.format("YYYY-MM-dd")).then(function(t){n.days=t.data})}function r(){t.getConsumedServices(n.selectedDate.format("YYYY-MM-dd"),i).then(function(t){if(i==1&&(n.consumedServices=[]),t.data.length>0)for(var r=0;r<t.data.length;r++)n.consumedServices.push(t.data[r]);n.dataForLoadMore=n.consumedServices.length==0?null:t.data})}n.title="服务记录";n.routeName="home";var i=1;n.dataForLoadMore=null;n.consumedServices=null;n.startDate=new Date;n.startDate.setDate(n.startDate.getDate()-n.startDate.getDay());n.selectedDate=new Date;u();r();n.selectDate=function(t){n.selectedDate=new Date(t);n.$broadcast("resetPullPixel");i=1;r()};n.selectWeek=function(t){t>0?(n.startDate.setDate(n.startDate.getDate()+7),n.selectedDate.setDate(n.selectedDate.getDate()+7)):(n.startDate.setDate(n.startDate.getDate()-7),n.selectedDate.setDate(n.selectedDate.getDate()-7));n.$broadcast("resetPullPixel");i=1;u();r()};n.loadMore=function(){i++;r()}}]);