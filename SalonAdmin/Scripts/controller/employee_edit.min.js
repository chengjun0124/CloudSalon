app.controller("employee_edit",["$scope","$stateParams","employeeAPIService","$timeout","dialogService","storageService",function(n,t,i,r,u,f){n.isCreate=t.employeeId==""?!0:!1;n.title=n.isCreate?"新增员工":"修改员工";n.routeName="employees";n.employee={};n.userTypeId=f.getUserTypeId();n.employeeDayOffs=[];n.weekItems=[{text:"周一",value:1},{text:"周二",value:2},{text:"周三",value:3},{text:"周四",value:4},{text:"周五",value:5},{text:"周六",value:6},{text:"周日",value:7}];n.employeeTypes=[{text:"技师",value:2},{text:"美容院管理员",value:4}];n.isCreate||i.getEmployee(t.employeeId).then(function(t){n.employee=t.data;n.employee.picture=null;n.employeeDayOffs=[];n.employee.isDayoffMon&&n.employeeDayOffs.push(1);n.employee.isDayoffTue&&n.employeeDayOffs.push(2);n.employee.isDayoffWeb&&n.employeeDayOffs.push(3);n.employee.isDayoffThu&&n.employeeDayOffs.push(4);n.employee.isDayoffFri&&n.employeeDayOffs.push(5);n.employee.isDayoffSat&&n.employeeDayOffs.push(6);n.employee.isDayoffSun&&n.employeeDayOffs.push(7)});n.receiveDataURL=function(t){n.employee.picture=t;n.employee.smallPicture=t};n.submit=function(){n.employee.isDayoffMon=!1;n.employee.isDayoffTue=!1;n.employee.isDayoffWeb=!1;n.employee.isDayoffThu=!1;n.employee.isDayoffFri=!1;n.employee.isDayoffSat=!1;n.employee.isDayoffSun=!1;for(var t=0;t<n.employeeDayOffs.length;t++){if(n.employeeDayOffs[t]==1){n.employee.isDayoffMon=!0;continue}if(n.employeeDayOffs[t]==2){n.employee.isDayoffTue=!0;continue}if(n.employeeDayOffs[t]==3){n.employee.isDayoffWeb=!0;continue}if(n.employeeDayOffs[t]==4){n.employee.isDayoffThu=!0;continue}if(n.employeeDayOffs[t]==5){n.employee.isDayoffFri=!0;continue}if(n.employeeDayOffs[t]==6){n.employee.isDayoffSat=!0;continue}if(n.employeeDayOffs[t]==7){n.employee.isDayoffSun=!0;continue}}n.employee.userTypeId==2?n.employee.isBeautician=null:n.employee.isBeautician==null&&(n.employee.isBeautician=!1);n.employee.picture!=null&&(n.employee.picture=n.employee.picture.replace(/data:[^,]+,/,""));n.isCreate?i.createEmployee(n.employee).then(function(){u.showMention(1,"创建员工信息成功","employees")}):i.updateEmployee(n.employee).then(function(){u.showMention(1,"修改员工信息成功","employees")})}}]);