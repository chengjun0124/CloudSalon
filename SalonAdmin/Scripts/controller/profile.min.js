app.controller("profile",["$scope","employeeAPIService","dialogService",function(n,t,i){n.title="修改个人资料";n.routeName="setup";n.employee={};n.employeeDayOffs=[];n.weekItems=[{text:"周一",value:1},{text:"周二",value:2},{text:"周三",value:3},{text:"周四",value:4},{text:"周五",value:5},{text:"周六",value:6},{text:"周日",value:7}];t.getEmployee().then(function(t){n.employee=t.data;n.employee.picture=null;n.employeeDayOffs=[];n.employee.isDayoffMon&&n.employeeDayOffs.push(1);n.employee.isDayoffTue&&n.employeeDayOffs.push(2);n.employee.isDayoffWeb&&n.employeeDayOffs.push(3);n.employee.isDayoffThu&&n.employeeDayOffs.push(4);n.employee.isDayoffFri&&n.employeeDayOffs.push(5);n.employee.isDayoffSat&&n.employeeDayOffs.push(6);n.employee.isDayoffSun&&n.employeeDayOffs.push(7)});n.receiveDataURL=function(t){n.employee.picture=t;n.employee.smallPicture=t};n.submit=function(){n.employee.isDayoffMon=!1;n.employee.isDayoffTue=!1;n.employee.isDayoffWeb=!1;n.employee.isDayoffThu=!1;n.employee.isDayoffFri=!1;n.employee.isDayoffSat=!1;n.employee.isDayoffSun=!1;for(var r=0;r<n.employeeDayOffs.length;r++){if(n.employeeDayOffs[r]==1){n.employee.isDayoffMon=!0;continue}if(n.employeeDayOffs[r]==2){n.employee.isDayoffTue=!0;continue}if(n.employeeDayOffs[r]==3){n.employee.isDayoffWeb=!0;continue}if(n.employeeDayOffs[r]==4){n.employee.isDayoffThu=!0;continue}if(n.employeeDayOffs[r]==5){n.employee.isDayoffFri=!0;continue}if(n.employeeDayOffs[r]==6){n.employee.isDayoffSat=!0;continue}if(n.employeeDayOffs[r]==7){n.employee.isDayoffSun=!0;continue}}n.employee.picture!=null&&(n.employee.picture=n.employee.picture.replace(/data:[^,]+,/,""));t.updateProfile(n.employee).then(function(){i.showMention(1,"修改个人资料成功","setup")})}}]);