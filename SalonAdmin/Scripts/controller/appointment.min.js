app.controller("appointment",["$scope","$stateParams","routeService","appointmentAPIService","dialogService","storageService","consumedServiceAPIService",function(n,t,i,r,u,f,e){n.title="预约";n.routeName="appointments";n.userTypeId=f.getUserTypeId();n.isBeautician=f.getIsBeautician();n.userId=f.getUserId();r.getAppointment(t.appointmentId).then(function(t){n.appointment=t.data});n.changeStatus=function(n){var i,f;n==3?i="预约已确认，如有变更，请及时联系用户":n==2?i="预约已拒绝":n==6&&(i="预约已取消");f={apponintmentStatus:n,appointmentId:t.appointmentId};r.changeAppointStatus(f).then(function(){u.showMention(1,i,"appointments")})};n.scan=function(){window.control!=undefined?control.scan("bscan"):u.showMention(1,"扫码只能在集云美邦手机APP中使用")};n.scanResult=function(n){/^[a-zA-Z0-9]+-[a-zA-Z0-9]+-[a-zA-Z0-9]+-[a-zA-Z0-9]+-[a-zA-Z0-9]+$/.test(n)==!1?u.showMention(1,"无效消费码"):e.beauticianScan({consumeCode:n,appointmentId:t.appointmentId}).then(function(n){i.goParams("bscan_complete",{purchasedServiceId:n.data})})}}]);