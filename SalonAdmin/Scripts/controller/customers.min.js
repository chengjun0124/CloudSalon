app.controller("customers",["$scope","userAPIService","$timeout","storageService",function(n,t,i,r){function f(){t.getUsers(u,n.keyword).then(function(t){if(u==1&&(n.users=[]),t.data.length>0)for(var i=0;i<t.data.length;i++)n.users.push(t.data[i]);n.dataForLoadMore=n.users.length==0?null:t.data})}var u,e;n.title="顾客";n.routeName="home";u=1;n.dataForLoadMore=null;n.users=null;n.userTypeId=r.getUserTypeId();t.getUserCount().then(function(t){n.userCount=t.data});f();n.loadMore=function(){u++;f()};n.search=function(){e!=null&&i.cancel(e);e=i(function(){n.$broadcast("resetPullPixel");u=1;f()},1e3)}}]);