app.controller("services",["$scope","locationEx","serviceAPIService","$rootScope","dialogService",function(n,t,i,r,u){function e(){i.getServices(f,o,n.selectedType.serviceTypeId).then(function(t){if(f==1&&(n.services=[]),t.data.length>0)for(var i=0;i<t.data.length;i++)n.services.push(t.data[i]);n.dataForLoadMore=n.services.length==0?null:t.data})}var o=t.queryString("identitycode"),f=1;r.pageTitle="惠美丽";n.selectedType=null;n.services=null;n.dataForLoadMore=null;n.serviceTypes=null;i.getServiceTypes(o).then(function(t){n.serviceTypes=t.data;n.serviceTypes.splice(0,0,{serviceTypeId:null,serviceTypeName:"全部分类"});n.selectedType=n.serviceTypes[0];e()});n.showServiceTypes=function(){u.showServiceTypes(n.serviceTypes,n.selectedType,n.selectType)};n.loadMore=function(){f++;e()};n.selectType=function(t){n.selectedType!=t&&(n.selectedType=t,f=1,n.$broadcast("resetPullPixel"),e())}}]);